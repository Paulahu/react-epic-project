(this["webpackJsonpreact-epic-project"]=this["webpackJsonpreact-epic-project"]||[]).push([[3],{11:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return a}));var r=n(13),o=n.n(r);o.a.init({appId:"mKBoPo3JbzfS3F25F87Qi78q-gzGzoHsz",appKey:"tik25FdYrwTKjktccMJlShuT",serverURL:"https://mkbopo3j.lc-cn-n1-shared.com"});var i={register:function(e,t){var n=new r.User;return n.setUsername(e),n.setPassword(t),new Promise((function(e,t){n.signUp().then((function(t){e(t)}),(function(e){t(e)}))}))},login:function(e,t){return new Promise((function(n,o){r.User.logIn(e,t).then((function(e){n(e)}),(function(e){o(e)}))}))},logout:function(){r.User.logOut()},getCurrentUser:function(){return r.User.current()}},a={add:function(e,t){var n=new o.a.Object("Image"),r=new o.a.File(t,e);return n.set("filename",t),n.set("owner",o.a.User.current()),n.set("url",r),new Promise((function(e,t){n.save().then((function(t){e(t)}),(function(e){t(e)}))}))},find:function(e){var t=e.page,n=void 0===t?0:t,r=e.limit,i=void 0===r?10:r,a=new o.a.Query("Image");return a.include("owner"),a.limit(i),a.skip(n*i),a.equalTo("owner",o.a.User.current()),a.descending("createdAt"),new Promise((function(e,t){a.find().then((function(t){return e(t)})).catch((function(e){return t(e)}))}))},deleteItem:function(e){var t=o.a.Object.createWithoutData("Image",e);return t.destroy(),new Promise((function(e,n){t.destroy().then((function(t){return e(t,console.log("\u5220\u9664\u5bf9\u8c61"))})).catch((function(e){return n(e)}))}))}};window.Uploader=a},121:function(e,t,n){e.exports=n(161)},126:function(e,t,n){},161:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(8),a=n.n(i),c=(n(126),n(15)),u=n(95),l=n.n(u),s=n(29),p=n(3),f=n(16),b=n(162),m=n(69),y=n(73);function g(){var e=Object(c.a)(["\n  margin-left: 20px\n"]);return g=function(){return e},e}function h(){var e=Object(c.a)(["\n  margin-left: auto;\n  color: #fff\n"]);return h=function(){return e},e}function O(){var e=Object(c.a)(["\n  color:#fff;\n  margin-left: 40px;\n  font-size:15px;\n  &.active {\n    border-bottom:1px solid #fff;\n  }\n"]);return O=function(){return e},e}function d(){var e=Object(c.a)(["\n  color:#fff;\n  margin-left: 40px;\n  font-size:15px;\n  &.active {\n    border-bottom:1px solid #fff;\n  }\n \n"]);return d=function(){return e},e}function j(){var e=Object(c.a)(["\n  height:30px;\n"]);return j=function(){return e},e}function v(){var e=Object(c.a)(["\n  background-color: #02101f;\n  display:flex;\n  align-items:center;\n  padding: 10px 100px;\n"]);return v=function(){return e},e}var w=f.a.header(v()),U=f.a.img(j()),P=Object(f.a)(s.b)(d()),k=f.a.a(O()),E=f.a.div(h()),z=Object(f.a)(b.a)(g()),x=Object(y.a)((function(){var e=Object(m.a)(),t=e.UserStore,n=e.AuthStore,r=Object(p.f)();return o.a.createElement(w,null,o.a.createElement(U,{src:l.a}),o.a.createElement("nav",null,o.a.createElement(P,{to:"/",activeClassName:"active",exact:!0},"\u9996\u9875"),o.a.createElement(P,{to:"/history",activeClassName:"active"},"\u4e0a\u4f20\u5386\u53f2"),o.a.createElement(k,{target:"_blank",href:"https://github.com/Paulahu",activeClassName:"active"},"Github"),o.a.createElement(k,{target:"_blank",href:"https://juejin.im/user/5e609571f265da57337d0ebe/posts",activeClassName:"active"},"Blog")),o.a.createElement(E,null,t.currentUser?o.a.createElement(o.a.Fragment,null,t.currentUser.attributes.username," ",o.a.createElement(z,{type:"primary",onClick:function(){n.logout()}},"\u6ce8\u9500")):o.a.createElement(o.a.Fragment,null,o.a.createElement(z,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u767b\u5f55\u9875\u9762"),r.push("./login")}},"\u767b\u5f55"),o.a.createElement(z,{type:"primary",onClick:function(){console.log("\u8df3\u8f6c\u5230\u6ce8\u518c\u9875\u9762"),r.push("/register")}},"\u6ce8\u518c"))))}));function L(){var e=Object(c.a)(["\n  font-size: 15px;\n  color: #e8eaed8c;\n"]);return L=function(){return e},e}function F(){var e=Object(c.a)(["\n  padding: 10px 100px;\n  text-align: center;\n\n"]);return F=function(){return e},e}var D=f.a.footer(F()),I=f.a.div(L());var S=function(){return o.a.createElement(D,null,o.a.createElement(I,null,"MIT Licensed | Copyright \xa9 2020 Paula Hu"))},C=function(){return o.a.createElement("div",null,"Loading...")},M=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(2),n.e(6),n.e(8)]).then(n.bind(null,432))})),A=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(2),n.e(7)]).then(n.bind(null,431))})),B=(Object(r.lazy)((function(){return n.e(11).then(n.bind(null,423))})),Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,424))}))),H=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(10)]).then(n.bind(null,425))}));var J=function(){return o.a.createElement(o.a.Fragment,null,o.a.createElement(x,null),o.a.createElement("main",null,o.a.createElement(r.Suspense,{fallback:o.a.createElement(C,null)}," ",o.a.createElement(p.c,null,o.a.createElement(p.a,{path:"/",exact:!0,component:M}),o.a.createElement(p.a,{path:"/history",component:A}),o.a.createElement(p.a,{path:"/login",component:B}),o.a.createElement(p.a,{path:"/register",component:H})))),o.a.createElement(S,null))};n(160),n(11),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(s.a,null,"  ",o.a.createElement(J,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},69:function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var r,o,i,a,c,u,l,s,p,f,b,m,y,g,h,O,d=n(0),j=n(7),v=n(19),w=n(20),U=n(2),P=(n(43),n(1)),k=n(11),E=new(r=function(){function e(){Object(v.a)(this,e),Object(j.a)(this,"currentUser",o,this)}return Object(w.a)(e,[{key:"pullUser",value:function(){this.currentUser=k.a.getCurrentUser()}},{key:"resetUser",value:function(){this.currentUser=null}}]),e}(),o=Object(U.a)(r.prototype,"currentUser",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(U.a)(r.prototype,"pullUser",[P.f],Object.getOwnPropertyDescriptor(r.prototype,"pullUser"),r.prototype),Object(U.a)(r.prototype,"resetUser",[P.f],Object.getOwnPropertyDescriptor(r.prototype,"resetUser"),r.prototype),r),z=n(164),x=new(i=function(){function e(){Object(v.a)(this,e),Object(j.a)(this,"list",a,this),Object(j.a)(this,"isLoading",c,this),Object(j.a)(this,"hasMore",u,this),Object(j.a)(this,"page",l,this),this.limit=10}return Object(w.a)(e,[{key:"append",value:function(e){this.list=this.list.concat(e)}},{key:"find",value:function(){var e=this;this.isLoading=!0,k.b.find({page:this.page,limit:this.limit}).then((function(t){e.append(t),e.page++,t.length<e.limit&&(e.hasMore=!1)})).catch((function(e){z.a.error("\u52a0\u8f7d\u6570\u636e\u5931\u8d25")})).finally((function(){e.isLoading=!1}))}},{key:"delete",value:function(e){k.b.deleteItem(e).then(console.log("\u5220\u9664id\u4e3a".concat(e,"\u7684\u5143\u7d20"))).catch((function(e){return z.a.error("\u5220\u9664\u5143\u7d20\u5931\u8d25")}))}},{key:"reset",value:function(){this.list=[],this.isLoading=!1,this.hasMore=!0,this.page=0}}]),e}(),a=Object(U.a)(i.prototype,"list",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),c=Object(U.a)(i.prototype,"isLoading",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=Object(U.a)(i.prototype,"hasMore",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),l=Object(U.a)(i.prototype,"page",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Object(U.a)(i.prototype,"append",[P.f],Object.getOwnPropertyDescriptor(i.prototype,"append"),i.prototype),Object(U.a)(i.prototype,"find",[P.f],Object.getOwnPropertyDescriptor(i.prototype,"find"),i.prototype),Object(U.a)(i.prototype,"delete",[P.f],Object.getOwnPropertyDescriptor(i.prototype,"delete"),i.prototype),Object(U.a)(i.prototype,"reset",[P.f],Object.getOwnPropertyDescriptor(i.prototype,"reset"),i.prototype),i),L=new(s=function(){function e(){Object(v.a)(this,e),Object(j.a)(this,"filename",p,this),Object(j.a)(this,"file",f,this),Object(j.a)(this,"isUploading",b,this),Object(j.a)(this,"serverFile",m,this)}return Object(w.a)(e,[{key:"setFilename",value:function(e){this.filename=e}},{key:"setFile",value:function(e){this.file=e}},{key:"upLoad",value:function(){var e=this;return this.isUploading=!0,this.serverFile=null,new Promise((function(t,n){k.b.add(e.file,e.filename).then((function(n){e.serverFile=n,t(n)})).catch((function(e){z.a.error("\u56fe\u7247\u4e0a\u4f20\u5931\u8d25"),n(e)})).finally((function(){e.isUploading=!1}))}))}},{key:"reset",value:function(){this.isUploading=!1,this.serverFile=null}}]),e}(),p=Object(U.a)(s.prototype,"filename",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),f=Object(U.a)(s.prototype,"file",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=Object(U.a)(s.prototype,"isUploading",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=Object(U.a)(s.prototype,"serverFile",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Object(U.a)(s.prototype,"setFilename",[P.f],Object.getOwnPropertyDescriptor(s.prototype,"setFilename"),s.prototype),Object(U.a)(s.prototype,"setFile",[P.f],Object.getOwnPropertyDescriptor(s.prototype,"setFile"),s.prototype),Object(U.a)(s.prototype,"upLoad",[P.f],Object.getOwnPropertyDescriptor(s.prototype,"upLoad"),s.prototype),Object(U.a)(s.prototype,"reset",[P.f],Object.getOwnPropertyDescriptor(s.prototype,"reset"),s.prototype),s),F=new(y=function(){function e(){Object(v.a)(this,e),Object(j.a)(this,"isLogin",g,this),Object(j.a)(this,"isLoading",h,this),Object(j.a)(this,"values",O,this)}return Object(w.a)(e,[{key:"setIsLogin",value:function(e){this.isLogin=e}},{key:"setUsername",value:function(e){this.values.username=e}},{key:"setPassword",value:function(e){this.values.password=e}},{key:"login",value:function(){var e=this;return new Promise((function(t,n){k.a.login(e.values.username,e.values.password).then((function(e){E.pullUser(),t(e)})).catch((function(e){E.resetUser(),z.a.error("\u767b\u5f55\u5931\u8d25"),n(e)}))}))}},{key:"register",value:function(){var e=this;return new Promise((function(t,n){k.a.register(e.values.username,e.values.password).then((function(e){E.pullUser(),t(e)})).catch((function(e){E.resetUser(),z.a.error("\u6ce8\u518c\u5931\u8d25"),n(e)}))}))}},{key:"logout",value:function(){k.a.logout(),E.resetUser(),x.reset(),L.reset()}}]),e}(),g=Object(U.a)(y.prototype,"isLogin",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=Object(U.a)(y.prototype,"isLoading",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),O=Object(U.a)(y.prototype,"values",[P.m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{username:"",password:""}}}),Object(U.a)(y.prototype,"setIsLogin",[P.f],Object.getOwnPropertyDescriptor(y.prototype,"setIsLogin"),y.prototype),Object(U.a)(y.prototype,"setUsername",[P.f],Object.getOwnPropertyDescriptor(y.prototype,"setUsername"),y.prototype),Object(U.a)(y.prototype,"setPassword",[P.f],Object.getOwnPropertyDescriptor(y.prototype,"setPassword"),y.prototype),Object(U.a)(y.prototype,"login",[P.f],Object.getOwnPropertyDescriptor(y.prototype,"login"),y.prototype),Object(U.a)(y.prototype,"register",[P.f],Object.getOwnPropertyDescriptor(y.prototype,"register"),y.prototype),Object(U.a)(y.prototype,"logout",[P.f],Object.getOwnPropertyDescriptor(y.prototype,"logout"),y.prototype),y),D=Object(d.createContext)({AuthStore:F,UserStore:E,ImageStore:L,HistoryStore:x});window.stores={AuthStore:F,UserStore:E,ImageStore:L,HistoryStore:x};var I=function(){return Object(d.useContext)(D)}},95:function(e,t,n){e.exports=n.p+"static/media/flower.7bdaa3f2.png"}},[[121,4,5]]]);
//# sourceMappingURL=main.976dec74.chunk.js.map