(this["webpackJsonpreact-epic-project"]=this["webpackJsonpreact-epic-project"]||[]).push([[7],{410:function(e,t,r){e.exports=r(411)},411:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),o=r(0),a=l(o),i=l(r(31));function l(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var r=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.scrollListener=r.scrollListener.bind(r),r.eventListenerOptions=r.eventListenerOptions.bind(r),r.mousewheelListener=r.mousewheelListener.bind(r),r}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),n(t,[{key:"componentDidMount",value:function(){this.pageLoaded=this.props.pageStart,this.options=this.eventListenerOptions(),this.attachScrollListener()}},{key:"componentDidUpdate",value:function(){if(this.props.isReverse&&this.loadMore){var e=this.getParentElement(this.scrollComponent);e.scrollTop=e.scrollHeight-this.beforeScrollHeight+this.beforeScrollTop,this.loadMore=!1}this.attachScrollListener()}},{key:"componentWillUnmount",value:function(){this.detachScrollListener(),this.detachMousewheelListener()}},{key:"isPassiveSupported",value:function(){var e=!1,t={get passive(){e=!0}};try{document.addEventListener("test",null,t),document.removeEventListener("test",null,t)}catch(r){}return e}},{key:"eventListenerOptions",value:function(){var e=this.props.useCapture;return this.isPassiveSupported()&&(e={useCapture:this.props.useCapture,passive:!0}),e}},{key:"setDefaultLoader",value:function(e){this.defaultLoader=e}},{key:"detachMousewheelListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.scrollComponent.parentNode),e.removeEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture)}},{key:"detachScrollListener",value:function(){var e=window;!1===this.props.useWindow&&(e=this.getParentElement(this.scrollComponent)),e.removeEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),e.removeEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture)}},{key:"getParentElement",value:function(e){var t=this.props.getScrollParent&&this.props.getScrollParent();return null!=t?t:e&&e.parentNode}},{key:"filterProps",value:function(e){return e}},{key:"attachScrollListener",value:function(){var e=this.getParentElement(this.scrollComponent);if(this.props.hasMore&&e){var t=window;!1===this.props.useWindow&&(t=e),t.addEventListener("mousewheel",this.mousewheelListener,this.options?this.options:this.props.useCapture),t.addEventListener("scroll",this.scrollListener,this.options?this.options:this.props.useCapture),t.addEventListener("resize",this.scrollListener,this.options?this.options:this.props.useCapture),this.props.initialLoad&&this.scrollListener()}}},{key:"mousewheelListener",value:function(e){1!==e.deltaY||this.isPassiveSupported()||e.preventDefault()}},{key:"scrollListener",value:function(){var e=this.scrollComponent,t=window,r=this.getParentElement(e),n=void 0;if(this.props.useWindow){var o=document.documentElement||document.body.parentNode||document.body,a=void 0!==t.pageYOffset?t.pageYOffset:o.scrollTop;n=this.props.isReverse?a:this.calculateOffset(e,a)}else n=this.props.isReverse?r.scrollTop:e.scrollHeight-r.scrollTop-r.clientHeight;n<Number(this.props.threshold)&&e&&null!==e.offsetParent&&(this.detachScrollListener(),this.beforeScrollHeight=r.scrollHeight,this.beforeScrollTop=r.scrollTop,"function"===typeof this.props.loadMore&&(this.props.loadMore(this.pageLoaded+=1),this.loadMore=!0))}},{key:"calculateOffset",value:function(e,t){return e?this.calculateTopPosition(e)+(e.offsetHeight-t-window.innerHeight):0}},{key:"calculateTopPosition",value:function(e){return e?e.offsetTop+this.calculateTopPosition(e.offsetParent):0}},{key:"render",value:function(){var e=this,t=this.filterProps(this.props),r=t.children,n=t.element,o=t.hasMore,i=(t.initialLoad,t.isReverse),l=t.loader,s=(t.loadMore,t.pageStart,t.ref),c=(t.threshold,t.useCapture,t.useWindow,t.getScrollParent,function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r}(t,["children","element","hasMore","initialLoad","isReverse","loader","loadMore","pageStart","ref","threshold","useCapture","useWindow","getScrollParent"]));c.ref=function(t){e.scrollComponent=t,s&&s(t)};var u=[r];return o&&(l?i?u.unshift(l):u.push(l):this.defaultLoader&&(i?u.unshift(this.defaultLoader):u.push(this.defaultLoader))),a.default.createElement(n,c,u)}}]),t}(o.Component);s.propTypes={children:i.default.node.isRequired,element:i.default.node,hasMore:i.default.bool,initialLoad:i.default.bool,isReverse:i.default.bool,loader:i.default.node,loadMore:i.default.func.isRequired,pageStart:i.default.number,ref:i.default.func,getScrollParent:i.default.func,threshold:i.default.number,useCapture:i.default.bool,useWindow:i.default.bool},s.defaultProps={element:"div",hasMore:!1,initialLoad:!0,pageStart:0,ref:null,threshold:250,useWindow:!0,isReverse:!1,useCapture:!1,loader:null,getScrollParent:null},t.default=s,e.exports=t.default},412:function(e,t,r){},431:function(e,t,r){"use strict";r.r(t);var n=r(0),o=r.n(n),a=r(15),i=r(73),l=r(69),s=r(410),c=r.n(s),u=r(5),p=r.n(u),d=r(234),f=r(186),h=r(184),m=r(163),v=r(235),y=r(336),b=r(220),g=r(65);function E(){return(E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}var w=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},S=function(e){var t,r,o,a=e.prefixCls,i=e.children,l=e.actions,s=e.extra,c=e.className,u=e.colStyle,d=w(e,["prefixCls","children","actions","extra","className","colStyle"]),f=n.useContext(T),h=f.grid,v=f.itemLayout,y=n.useContext(m.b).getPrefixCls,S=y("list",a),O=l&&l.length>0&&n.createElement("ul",{className:"".concat(S,"-item-action"),key:"actions"},l.map((function(e,t){return n.createElement("li",{key:"".concat(S,"-item-action-").concat(t)},e,t!==l.length-1&&n.createElement("em",{className:"".concat(S,"-item-action-split")}))}))),L=h?"div":"li",C=n.createElement(L,E({},d,{className:p()("".concat(S,"-item"),c,(t={},r="".concat(S,"-item-no-flex"),o=!("vertical"===v?s:!function(){var e;return n.Children.forEach(i,(function(t){"string"===typeof t&&(e=!0)})),e&&n.Children.count(i)>1}()),r in t?Object.defineProperty(t,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[r]=o,t))}),"vertical"===v&&s?[n.createElement("div",{className:"".concat(S,"-item-main"),key:"content"},i,O),n.createElement("div",{className:"".concat(S,"-item-extra"),key:"extra"},s)]:[i,O,Object(g.a)(s,{key:"extra"})]);return h?n.createElement(b.a,{flex:1,style:u},C):C};S.Meta=function(e){var t=e.prefixCls,r=e.className,o=e.avatar,a=e.title,i=e.description,l=w(e,["prefixCls","className","avatar","title","description"]),s=(0,n.useContext(m.b).getPrefixCls)("list",t),c=p()("".concat(s,"-item-meta"),r),u=n.createElement("div",{className:"".concat(s,"-item-meta-content")},a&&n.createElement("h4",{className:"".concat(s,"-item-meta-title")},a),i&&n.createElement("div",{className:"".concat(s,"-item-meta-description")},i));return n.createElement("div",E({},l,{className:c}),o&&n.createElement("div",{className:"".concat(s,"-item-meta-avatar")},o),(a||i)&&u)};var O=S;function L(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||j(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function P(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"===typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(n=(i=l.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(s){o=!0,a=s}finally{try{n||null==l.return||l.return()}finally{if(o)throw a}}return r}(e,t)||j(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){if(e){if("string"===typeof e)return k(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function M(e){return(M="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var N=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r},T=n.createContext({});T.Consumer;function z(e){var t,r=e.pagination,o=void 0!==r&&r,a=e.prefixCls,i=e.bordered,l=void 0!==i&&i,s=e.split,c=void 0===s||s,u=e.className,b=e.children,g=e.itemLayout,E=e.loadMore,w=e.grid,S=e.dataSource,O=void 0===S?[]:S,j=e.size,k=e.header,z=e.footer,I=e.loading,_=void 0!==I&&I,W=e.rowKey,H=e.renderItem,R=e.locale,A=N(e,["pagination","prefixCls","bordered","split","className","children","itemLayout","loadMore","grid","dataSource","size","header","footer","loading","rowKey","renderItem","locale"]),D=o&&"object"===M(o)?o:{},U=x(n.useState(D.defaultCurrent||1),2),Y=U[0],q=U[1],J=x(n.useState(D.defaultPageSize||10),2),K=J[0],B=J[1],$=n.useContext(m.b),F=$.getPrefixCls,G=$.renderEmpty,Q=$.direction,V={},X=function(e){return function(t,r){var n;q(t),B(r),"onShowSizeChange"===e&&o&&(null===(n=null===o||void 0===o?void 0:o.onChange)||void 0===n||n.call(o,t,r)),o&&o[e]&&o[e](t,r)}},Z=X("onChange"),ee=X("onShowSizeChange"),te=F("list",a),re=_;"boolean"===typeof re&&(re={spinning:re});var ne=re&&re.spinning,oe="";switch(j){case"large":oe="lg";break;case"small":oe="sm"}var ae=p()(te,u,(P(t={},"".concat(te,"-vertical"),"vertical"===g),P(t,"".concat(te,"-").concat(oe),oe),P(t,"".concat(te,"-split"),c),P(t,"".concat(te,"-bordered"),l),P(t,"".concat(te,"-loading"),ne),P(t,"".concat(te,"-grid"),w),P(t,"".concat(te,"-something-after-last-item"),!!(E||o||z)),P(t,"".concat(te,"-rtl"),"rtl"===Q),t)),ie=C(C(C({},{current:1,total:0}),{total:O.length,current:Y,pageSize:K}),o||{}),le=Math.ceil(ie.total/ie.pageSize);ie.current>le&&(ie.current=le);var se=o?n.createElement("div",{className:"".concat(te,"-pagination")},n.createElement(v.a,C({},ie,{onChange:Z,onShowSizeChange:ee}))):null,ce=L(O);o&&O.length>(ie.current-1)*ie.pageSize&&(ce=L(O).splice((ie.current-1)*ie.pageSize,ie.pageSize));var ue=Object(f.a)(),pe=n.useMemo((function(){for(var e=0;e<h.b.length;e+=1){var t=h.b[e];if(ue[t])return t}}),[ue]),de=n.useMemo((function(){if(w){var e=pe&&w[pe]?w[pe]:w.column;return e?{width:"".concat(100/e,"%"),maxWidth:"".concat(100/e,"%")}:void 0}}),[null===w||void 0===w?void 0:w.column,pe]),fe=ne&&n.createElement("div",{style:{minHeight:53}});if(ce.length>0){var he=ce.map((function(e,t){return function(e,t){return H?((r="function"===typeof W?W(e):"string"===typeof W?e[W]:e.key)||(r="list-item-".concat(t)),V[t]=r,H(e,t)):null;var r}(e,t)})),me=n.Children.map(he,(function(e,t){return n.createElement("div",{key:V[t],style:de},e)}));fe=w?n.createElement(y.a,{gutter:w.gutter},me):n.createElement("ul",{className:"".concat(te,"-items")},he)}else b||ne||(fe=function(e,t){return n.createElement("div",{className:"".concat(e,"-empty-text")},R&&R.emptyText||t("List"))}(te,G));var ve=ie.position||"bottom";return n.createElement(T.Provider,{value:{grid:w,itemLayout:g}},n.createElement("div",C({className:ae},A),("top"===ve||"both"===ve)&&se,k&&n.createElement("div",{className:"".concat(te,"-header")},k),n.createElement(d.a,re,fe,b),z&&n.createElement("div",{className:"".concat(te,"-footer")},z),E||("bottom"===ve||"both"===ve)&&se))}z.Item=O;var I=z,_=r(162);function W(){var e=Object(a.a)(["\n  width: 100px;\n  height: 120px;\n  object-fit: contain;\n  border: 1px solid #eee;\n"]);return W=function(){return e},e}var H=r(16).a.img(W()),R=Object(i.a)((function(e,t){var r=Object(l.a)().HistoryStore,a=function(n){r.delete(n);var o=document.getElementById("".concat(n));console.log(o),o.remove(e,t)};return Object(n.useEffect)((function(){return console.log("\u8fdb\u5165\u7ec4\u4ef6"),function(){console.log("\u5378\u8f7d"),r.reset()}}),[]),o.a.createElement("div",null,o.a.createElement(c.a,{initialLoad:!0,pageStart:0,loadMore:function(){r.find()},hasMore:!r.isLoading&&r.hasMore,useWindow:!0},o.a.createElement(I,{dataSource:r.list,renderItem:function(e){return o.a.createElement(I.Item,{key:e.id,id:"".concat(e.id)},o.a.createElement("div",null,o.a.createElement(H,{src:e.attributes.url.attributes.url})),o.a.createElement("div",null,o.a.createElement("h5",null,e.attributes.filename)),o.a.createElement("div",null,o.a.createElement("a",{target:"_blank",href:e.attributes.url.attributes.url},e.attributes.url.attributes.url)),o.a.createElement("div",null,o.a.createElement(_.a,{type:"primary",onClick:function(){return a(e.id)&&void e.id}},"\u5220\u9664\u8bb0\u5f55")))}},r.isLoading&&r.hasMore&&o.a.createElement("div",null,o.a.createElement(d.a,{tip:"\u52a0\u8f7d\u4e2d"})))))})),A=(r(412),{height:"80vh",padding:"20px",border:"1px #fff dashed",width:"100%"}),D={width:"100% +18px",border:"1px solid black",backgroundColor:"#fff",height:"74vh",overflow:"scroll",padding:"0 30px"};t.default=function(){return o.a.createElement("div",{style:A},o.a.createElement("div",{style:D},o.a.createElement(R,null)))}}}]);
//# sourceMappingURL=7.fce9a042.chunk.js.map